# Dpz.Core.WebMore

<div align="center">

[![.NET](https://img.shields.io/badge/.NET-10.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![Blazor](https://img.shields.io/badge/Blazor-WASM-512BD4?logo=blazor)](https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

åŸºäº ASP.NET Core Blazor WebAssembly æ„å»ºçš„ä¸ªäººç½‘ç«™åº”ç”¨

[åœ¨çº¿é¢„è§ˆ](https://www.dpangzi.com) | [é—®é¢˜åé¦ˆ](https://github.com/pengqian089/Dpz.Core.WebMore/issues)

</div>

## ğŸ“– é¡¹ç›®ç®€ä»‹

Dpz.Core.WebMore æ˜¯ä¸€ä¸ªä½¿ç”¨ Blazor WebAssembly æŠ€æœ¯æ„å»ºçš„ç°ä»£åŒ–ä¸ªäººç½‘ç«™åº”ç”¨ã€‚é¡¹ç›®æœ€åˆä½œä¸ºå­¦ä¹ å’Œå®éªŒ Blazor æŠ€æœ¯çš„ç»ƒä¹ é¡¹ç›®ï¼Œç»è¿‡ä¸æ–­è¿­ä»£å’Œå®Œå–„ï¼Œç°å·²å‘å±•æˆä¸ºåŠŸèƒ½å®Œå–„çš„ä¸ªäººç½‘ç«™ï¼Œå¹¶æˆåŠŸéƒ¨ç½²ä¸Šçº¿ã€‚

è™½ç„¶ä¸æ˜¯ä¸»ç«™ç‚¹ï¼Œä½†æœ¬åº”ç”¨åœ¨å¤–è§‚è®¾è®¡ã€æ•°æ®å±•ç¤ºç­‰æ–¹é¢ä¸ä¸»ç«™ç‚¹ä¿æŒäº†é«˜åº¦ä¸€è‡´ï¼Œæä¾›äº†æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ“ å†…å®¹ç®¡ç†
- **æ–‡ç« ç³»ç»Ÿ** - æ”¯æŒæ–‡ç« åˆ—è¡¨ã€è¯¦æƒ…å±•ç¤ºã€æœç´¢å’Œåˆ†ç±»
- **ä»£ç ç¬”è®°** - ä»£ç ç‰‡æ®µçš„ç»„ç»‡å’Œå±•ç¤ºï¼Œæ”¯æŒè¯­æ³•é«˜äº®
- **ç¢ç¢å¿µï¼ˆMumbleï¼‰** - ç®€çŸ­çš„æƒ³æ³•å’Œè®°å½•
- **æ—¶é—´çº¿** - ä»¥æ—¶é—´è½´å½¢å¼å±•ç¤ºé‡è¦äº‹ä»¶

### ğŸ¨ å¤šåª’ä½“
- **ç›¸å†Œç®¡ç†** - å›¾ç‰‡çš„å±•ç¤ºå’Œç®¡ç†
- **éŸ³ä¹æ’­æ”¾** - éŸ³ä¹åˆ—è¡¨å’Œæ’­æ”¾åŠŸèƒ½
- **è§†é¢‘å±•ç¤º** - è§†é¢‘å†…å®¹çš„ç»„ç»‡å’Œæ’­æ”¾

### ğŸ”– ä¸ªäººå·¥å…·
- **ä¹¦ç­¾ç®¡ç†** - ç½‘é¡µä¹¦ç­¾çš„æ”¶è—å’Œåˆ†ç±»
- **Steam æ¸¸æˆ** - Steam æ¸¸æˆåº“å±•ç¤ºå’Œè¯¦æƒ…
- **BSON å·¥å…·** - BSON æ•°æ®çš„æ ¼å¼åŒ–å±•ç¤º

### ğŸ’¬ ç¤¾äº¤äº’åŠ¨
- **è¯„è®ºç³»ç»Ÿ** - æ–‡ç« å’Œå†…å®¹çš„è¯„è®ºåŠŸèƒ½
- **æˆå°±ç³»ç»Ÿ** - ä¸ªäººæˆå°±çš„å±•ç¤º
- **æœ‹å‹é“¾æ¥** - å‹æƒ…é“¾æ¥ç®¡ç†
- **å®æ—¶é€šçŸ¥** - åŸºäº SignalR çš„å®æ—¶æ¨é€

### ğŸ¯ æŠ€æœ¯äº®ç‚¹
- **å›¾æ ‡ç³»ç»Ÿ** - é›†æˆ Material Design å›¾æ ‡ï¼Œæ–‡ä»¶ç±»å‹å›¾æ ‡è‡ªåŠ¨è¯†åˆ«
- **å¯¹è¯æ¡†æœåŠ¡** - ç»Ÿä¸€çš„å¯¹è¯æ¡†ã€é€šçŸ¥å’Œ Toast æ¶ˆæ¯ç®¡ç†
- **åˆ†é¡µç»„ä»¶** - çµæ´»çš„æ•°æ®åˆ†é¡µæ”¯æŒ
- **å“åº”å¼è®¾è®¡** - é€‚é…å„ç§å±å¹•å°ºå¯¸

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: ASP.NET Core Blazor WebAssembly (.NET 10.0)
- **å‰ç«¯**: Blazor Components + JavaScript Interop
- **å®æ—¶é€šä¿¡**: SignalR
- **æ ·å¼**: è‡ªå®šä¹‰ CSS
- **æ„å»ºå·¥å…·**: MSBuild

## ğŸ“ é¡¹ç›®ç»“æ„

```
Dpz.Core.WebMore/
â”œâ”€â”€ Pages/                    # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Albums.razor         # ç›¸å†Œé¡µé¢
â”‚   â”œâ”€â”€ Article.razor        # æ–‡ç« è¯¦æƒ…
â”‚   â”œâ”€â”€ ArticleList.razor    # æ–‡ç« åˆ—è¡¨
â”‚   â”œâ”€â”€ Bookmark.razor       # ä¹¦ç­¾ç®¡ç†
â”‚   â”œâ”€â”€ CodeView.razor       # ä»£ç æŸ¥çœ‹
â”‚   â”œâ”€â”€ Mumble.razor         # ç¢ç¢å¿µ
â”‚   â”œâ”€â”€ Timeline.razor       # æ—¶é—´çº¿
â”‚   â”œâ”€â”€ Comment/             # è¯„è®ºç»„ä»¶
â”‚   â””â”€â”€ CodeComponent/       # ä»£ç ç»„ä»¶
â”œâ”€â”€ Shared/                   # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ Components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ MainLayout.razor     # ä¸»å¸ƒå±€
â”‚   â””â”€â”€ NavMenu.razor        # å¯¼èˆªèœå•
â”œâ”€â”€ Service/                  # æœåŠ¡æ¥å£å’Œå®ç°
â”‚   â”œâ”€â”€ IArticleService.cs
â”‚   â”œâ”€â”€ ICommentService.cs
â”‚   â”œâ”€â”€ IMusicService.cs
â”‚   â””â”€â”€ Impl/                # æœåŠ¡å®ç°
â”œâ”€â”€ Models/                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ ArticleModel.cs
â”‚   â”œâ”€â”€ CommentModel.cs
â”‚   â”œâ”€â”€ Dialog/              # å¯¹è¯æ¡†æ¨¡å‹
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Helper/                   # è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ Icons/               # å›¾æ ‡å¸®åŠ©ç±»
â”‚   â”œâ”€â”€ PagedList.cs         # åˆ†é¡µå·¥å…·
â”‚   â””â”€â”€ TypeDiscriminatorConverter.cs
â””â”€â”€ wwwroot/                  # é™æ€èµ„æº
    â”œâ”€â”€ css/                 # æ ·å¼æ–‡ä»¶
    â”œâ”€â”€ js/                  # JavaScript æ–‡ä»¶
    â””â”€â”€ index.html           # å…¥å£é¡µé¢
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- [.NET 10.0 SDK](https://dotnet.microsoft.com/download/dotnet/10.0) æˆ–æ›´é«˜ç‰ˆæœ¬
- æ¨èä½¿ç”¨ Visual Studio 2022 / Rider / VS Code

### è¿è¡Œé¡¹ç›®

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd src/Dpz.Core.WebMore
   ```

2. **è¿˜åŸä¾èµ–**
   ```bash
   dotnet restore
   ```

3. **è¿è¡Œåº”ç”¨**
   ```bash
   dotnet run
   ```

4. **è®¿é—®åº”ç”¨**
   
   åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `https://localhost:5001` æˆ– `http://localhost:5000`

### æ„å»ºå‘å¸ƒ

```bash
dotnet publish -c Release -o ./publish
```

å‘å¸ƒåçš„æ–‡ä»¶ä½äº `./publish/wwwroot` ç›®å½•ä¸‹ã€‚

## ğŸ“¦ éƒ¨ç½²è¯´æ˜

### Nginx é…ç½®

```conf
server {
    listen                      80;
    listen                      443 ssl http2;
    server_name                 www.dpangzi.com;
    ssl_certificate             /path/to/cert/dpangzi.com_bundle.pem;
    ssl_certificate_key         /path/to/cert/dpangzi.com.key;
    ssl_protocols               TLSv1.2 TLSv1.3;
    ssl_ciphers                 EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:!MD5;
    ssl_prefer_server_ciphers   on;
    ssl_session_cache           shared:SSL:10m;
    ssl_session_timeout         10m;
    add_header                  Strict-Transport-Security "max-age=31536000";
    error_page 497              https://$host$request_uri;
    
    root                        /path/to/wwwroot;
    location / {
        root                    /path/to/wwwroot;
        try_files               $uri $uri/ /index.html =404;
        limit_req               zone=one burst=60 nodelay;
    }
}
```

### IIS é…ç½® (web.config)

<details>
<summary>ç‚¹å‡»å±•å¼€ web.config é…ç½®</summary>

```xml
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <httpProtocol>
            <customHeaders>
                <remove name="X-Powered-By"/>
            </customHeaders>
        </httpProtocol>
        <staticContent>
            <remove fileExtension=".blat"/>
            <remove fileExtension=".dat"/>
            <remove fileExtension=".dll"/>
            <remove fileExtension=".json"/>
            <remove fileExtension=".wasm"/>
            <remove fileExtension=".woff"/>
            <remove fileExtension=".woff2"/>
            <mimeMap fileExtension=".blat" mimeType="application/octet-stream"/>
            <mimeMap fileExtension=".dll" mimeType="application/octet-stream"/>
            <mimeMap fileExtension=".dat" mimeType="application/octet-stream"/>
            <mimeMap fileExtension=".json" mimeType="application/json"/>
            <mimeMap fileExtension=".wasm" mimeType="application/wasm"/>
            <mimeMap fileExtension=".woff" mimeType="application/font-woff"/>
            <mimeMap fileExtension=".woff2" mimeType="application/font-woff"/>
        </staticContent>
        <httpCompression>
            <dynamicTypes>
                <add mimeType="application/octet-stream" enabled="true"/>
                <add mimeType="application/wasm" enabled="true"/>
            </dynamicTypes>
        </httpCompression>
        <rewrite>
            <rules>
                <rule name="Serve subdir">
                    <match url=".*"/>
                    <action type="Rewrite" url="wwwroot\{R:0}"/>
                </rule>
                <rule name="SPA fallback routing" stopProcessing="true">
                    <match url=".*"/>
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                    </conditions>
                    <action type="Rewrite" url="wwwroot\index.html"/>
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration>
```

</details>

### éƒ¨ç½²æ­¥éª¤

1. ä½¿ç”¨ `dotnet publish` å‘½ä»¤æ„å»ºå‘å¸ƒç‰ˆæœ¬
2. å°† `wwwroot` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨
3. é…ç½® Web æœåŠ¡å™¨ï¼ˆNginx/IIS/Apacheï¼‰
4. ç¡®ä¿æœåŠ¡å™¨æ”¯æŒ WASM MIME ç±»å‹
5. é…ç½® HTTPS è¯ä¹¦ï¼ˆæ¨èä½¿ç”¨ Let's Encryptï¼‰

## ğŸ”§ å¼€å‘è¯´æ˜

### é…ç½®æ–‡ä»¶

åº”ç”¨é…ç½®ä½äº `wwwroot/appsettings.json` å’Œ `wwwroot/appsettings.Development.json`

```json
{
  "ApiBaseUrl": "https://api.example.com",
  "SignalRHub": "https://api.example.com/hub"
}
```

### è‡ªå®šä¹‰æ ·å¼

å…¨å±€æ ·å¼æ–‡ä»¶ä½äº `wwwroot/css/` ç›®å½•ä¸‹ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹ã€‚

### JavaScript äº’æ“ä½œ

JavaScript æ–‡ä»¶ä½äº `wwwroot/js/` ç›®å½•ä¸‹ï¼ŒBlazor ç»„ä»¶å¯é€šè¿‡ `IJSRuntime` è°ƒç”¨ã€‚

## ğŸ“ å¾…åŠäº‹é¡¹

- [ ] æ·»åŠ å›½é™…åŒ–æ”¯æŒï¼ˆi18nï¼‰
- [ ] æŸ¥çœ‹ä»£ç æ—¶çš„æ€§èƒ½ä¼˜åŒ–

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- [åœ¨çº¿è®¿é—®](https://www.dpangzi.com)
- [Blazor å®˜æ–¹æ–‡æ¡£](https://docs.microsoft.com/zh-cn/aspnet/core/blazor/)
- [.NET æ–‡æ¡£](https://docs.microsoft.com/zh-cn/dotnet/)

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ç½‘ç«™: https://www.dpangzi.com
- Issues: [GitHub Issues](https://github.com/your-repo/issues)

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#dpzcorewebmore)**

Made with â¤ï¸ using Blazor

</div>
