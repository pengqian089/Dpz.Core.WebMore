/* Albums Page Styles - Cyberpunk Wasteland Theme */

:root {
    --cp-yellow: #fcee0a;
    --cp-blue: #00f0ff;
    --cp-red: #ff003c;
    /* Map to theme variables */
    --color-accent: var(--cp-blue);
    --color-primary: var(--cp-yellow);
    --color-text-main: #e0e0e0;
}

/* --- Keyframes --- */
@keyframes glitch-skew {
    0% { transform: skew(0deg); }
    10% { transform: skew(-5deg); }
    20% { transform: skew(3deg); }
    30% { transform: skew(-3deg); }
    40% { transform: skew(5deg); }
    50% { transform: skew(-2deg); }
    60% { transform: skew(2deg); }
    70% { transform: skew(-4deg); }
    80% { transform: skew(4deg); }
    90% { transform: skew(-1deg); }
    100% { transform: skew(0deg); }
}

@keyframes glitch-anim {
    0% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 1px); filter: hue-rotate(90deg) contrast(1.5); }
    5% { clip-path: inset(10% 0 85% 0); transform: translate(4px, -2px); filter: hue-rotate(180deg) contrast(1.5); }
    10% { clip-path: inset(50% 0 30% 0); transform: translate(-3px, 3px); filter: hue-rotate(0deg) contrast(1.5); }
    15% { clip-path: inset(40% 0 45% 0); transform: translate(3px, -1px); filter: hue-rotate(270deg) contrast(1.5); }
    20% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 2px); filter: hue-rotate(90deg) contrast(1.5); }
    40% { clip-path: inset(10% 0 80% 0); transform: translate(2px, -2px); filter: hue-rotate(45deg) contrast(1.5); }
    60% { clip-path: inset(50% 0 30% 0); transform: translate(-2px, 1px); filter: hue-rotate(0deg) contrast(1.5); }
    80% { clip-path: inset(30% 0 60% 0); transform: translate(2px, -1px); filter: hue-rotate(90deg) contrast(1.5); }
    100% { clip-path: inset(80% 0 5% 0); transform: translate(0); filter: hue-rotate(0deg) contrast(1); }
}

@keyframes albums-spin {
    to { transform: rotate(360deg); }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- Layout & Container --- */
.albums {
    --albums-gap: 1.5rem;
    --albums-col-count: 1;
    max-width: var(--container-width, 1400px);
    margin: 0 auto;
    padding: var(--spacing-md, 1rem);
    animation: fadeIn 0.3s;
    position: relative;
}

/* --- Header --- */
.albums__header {
    margin-bottom: var(--spacing-lg, 2rem);
    padding-bottom: var(--spacing-sm, 1rem);
    border-bottom: 2px solid var(--color-border, #333);
    position: relative;
    text-align: left;
}

.albums__header::after {
    /* Decorative hazard strip */
    content: '';
    position: absolute;
    bottom: -6px;
    left: 0;
    width: 60px;
    height: 6px;
    background: var(--color-accent);
    clip-path: polygon(0 0, 100% 0, 90% 100%, 0 100%);
}

.albums__title {
    font-family: var(--font-stack-display, sans-serif);
    font-size: 2rem;
    font-weight: 800;
    text-transform: uppercase;
    color: var(--color-text-main);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm, 0.5rem);
    margin-bottom: var(--spacing-sm, 0.5rem);
    letter-spacing: 0.05em;
    position: relative;
    width: fit-content;
}

/* Title Glitch Effect */
.albums__title::before,
.albums__title::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-bg-body, #050505);
    opacity: 0.8;
}

.albums__title::before {
    left: 2px;
    text-shadow: -1px 0 var(--cp-red);
    clip: rect(24px, 550px, 90px, 0);
    animation: glitch-anim 3s infinite linear alternate-reverse;
}

.albums__title::after {
    left: -2px;
    text-shadow: -1px 0 var(--cp-blue);
    clip: rect(85px, 550px, 140px, 0);
    animation: glitch-anim 2.5s infinite linear alternate-reverse;
}

.albums__title i {
    color: var(--color-accent);
    position: relative;
    z-index: 2;
}

.albums__subtitle {
    color: var(--color-text-secondary);
    font-size: 1rem;
    font-family: var(--font-stack-mono, monospace);
    margin-bottom: var(--spacing-sm);
    padding-left: 2px;
    border-left: 2px solid var(--color-primary);
    padding-left: var(--spacing-sm);
}

.albums__stats {
    display: inline-flex;
    gap: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-family: var(--font-stack-mono, monospace);
    background: var(--color-bg-surface-alt, #1a1a1a);
    padding: 4px 8px;
    border: 1px solid var(--color-border);
}

/* --- Masonry Grid --- */
.albums__grid {
    column-count: var(--albums-col-count);
    column-gap: var(--albums-gap);
    width: 100%;
    margin: 0 auto;
}

.albums__item {
    break-inside: avoid;
    margin-bottom: var(--albums-gap);
    transform: translateZ(0); /* Fix for column rendering */
}

/* --- Cyberpunk Card --- */
.albums__card {
    background: var(--color-bg-surface, #111);
    border: 1px solid var(--color-border, #333);
    position: relative;
    /* Angled corners */
    clip-path: polygon(
        15px 0, 100% 0, 
        100% calc(100% - 15px), calc(100% - 15px) 100%, 
        0 100%, 0 15px
    );
    transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
    overflow: hidden;
    cursor: zoom-in;
}

.albums__card:hover {
    transform: translateY(-4px);
    border-color: var(--color-accent);
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
    z-index: 2;
}

.albums__card::before {
    /* Corner decoration */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 15px;
    height: 15px;
    background: linear-gradient(135deg, var(--color-accent) 50%, transparent 50%);
    opacity: 0.5;
    transition: opacity 0.2s;
    pointer-events: none;
    z-index: 2;
}

.albums__card:hover::before {
    opacity: 1;
}

.albums__image-wrapper {
    position: relative;
    width: 100%;
    background: #000;
}

.albums__image {
    display: block;
    width: 100%;
    height: auto;
    transition: filter 0.3s ease;
    opacity: 0;
}

.albums__image.is-loaded {
    opacity: 1;
}

/* Glitch Overlay on Hover */
.albums__card:hover .albums__image-wrapper::before,
.albums__card:hover .albums__image-wrapper::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--card-img);
    background-size: 100% 100%; /* Ensure it matches img size logic mostly */
    background-size: cover; /* Fallback */
    background-position: center; /* Fallback */
    opacity: 0.6;
    pointer-events: none;
    display: block;
    z-index: 2;
}

/* Since actual img has different aspect ratios and object-fit, matching background-image exactly is hard.
   However, for masonry, img is width:100% height:auto. 
   background-size: 100% auto might be better if we knew the aspect ratio.
   But we use cover for the glitch effect usually. 
   For albums, images are displayed fully. 
   Let's try to stick to simply overlaying. If aspect ratio mismatches slightly, it adds to the glitch. 
*/

.albums__card:hover .albums__image-wrapper::before {
    background-color: var(--cp-red);
    background-blend-mode: hard-light;
    mix-blend-mode: hard-light;
    animation: glitch-anim 3s infinite linear alternate-reverse;
}

.albums__card:hover .albums__image-wrapper::after {
    background-color: var(--cp-blue);
    background-blend-mode: hard-light;
    mix-blend-mode: hard-light;
    animation: glitch-anim 2.5s infinite linear alternate-reverse;
}

/* --- Overlay & Actions --- */
.albums__overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0.1) 100%);
    opacity: 0;
    transition: opacity var(--transition-fast);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: var(--spacing-md);
    z-index: 3; /* Above glitch layers */
    pointer-events: none;
}

.albums__card:hover .albums__overlay {
    opacity: 1;
    pointer-events: auto;
}

.albums__actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
}

.albums__action-btn {
    width: 36px;
    height: 36px;
    background: rgba(0, 0, 0, 0.7);
    border: 1px solid var(--color-accent);
    color: var(--color-accent);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    /* Tech shape */
    clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
}

.albums__action-btn:hover {
    background: var(--color-accent);
    color: #000;
    transform: scale(1.1);
    box-shadow: 0 0 10px var(--color-accent);
}

.albums__info {
    color: #fff;
    transform: translateY(10px);
    transition: transform var(--transition-fast);
}

.albums__card:hover .albums__info {
    transform: translateY(0);
}

.albums__desc {
    font-family: var(--font-stack-display, sans-serif);
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: var(--spacing-xs);
    text-shadow: 0 2px 4px #000;
    color: var(--color-primary);
}

.albums__meta {
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 0.8rem;
    font-family: var(--font-stack-mono, monospace);
    color: #ccc;
}

.albums__meta-row {
    display: flex;
    justify-content: space-between;
}

/* --- Loading & Empty --- */
.albums__loading {
    display: flex;
    justify-content: center;
    padding: var(--spacing-xl) 0;
    width: 100%;
}

.albums__spinner {
    width: 40px;
    height: 40px;
    border: 3px solid transparent;
    border-top-color: var(--color-primary);
    border-right-color: var(--color-accent);
    border-bottom-color: var(--color-primary);
    border-radius: 50%;
    animation: albums-spin 1s linear infinite;
    box-shadow: 0 0 10px rgba(0, 240, 255, 0.2);
}

.albums__no-more {
    text-align: center;
    padding: var(--spacing-xl) 0;
    color: var(--color-text-muted);
    font-family: var(--font-stack-mono, monospace);
    text-transform: uppercase;
    letter-spacing: 2px;
}

.albums__no-more p::before,
.albums__no-more p::after {
    content: '-';
    margin: 0 10px;
    color: var(--color-primary);
}

/* --- Responsive Columns --- */
@media (min-width: 640px) {
    .albums { --albums-col-count: 2; }
}

@media (min-width: 1024px) {
    .albums { --albums-col-count: 3; }
}

@media (min-width: 1280px) {
    .albums { --albums-col-count: 4; }
}
