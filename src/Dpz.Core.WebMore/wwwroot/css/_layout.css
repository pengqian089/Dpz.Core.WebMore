/* Reset & Base */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* ==========================================================================
   Selection Styles - Cyberpunk Wasteland (Enhanced Neon FX)
   ========================================================================== */

/* Chromium & Safari - Light Mode */
::selection {
    background-color: var(--color-accent);
    color: var(--color-bg-body);
    text-shadow: 
        /* Inner glow */
        0 0 1px var(--color-bg-body),
        /* Core neon */
        0 0 3px var(--color-accent),
        0 0 6px var(--color-accent),
        /* Outer spread */
        0 0 12px var(--color-accent-secondary),
        /* Chromatic aberration - Glitch effect */
        2px 0 0 rgba(255, 0, 85, 0.4),
        -2px 0 0 rgba(0, 217, 247, 0.4);
    -webkit-background-clip: initial;
    background-clip: initial;
}

/* Firefox - Light Mode */
::-moz-selection {
    background-color: var(--color-accent);
    color: var(--color-bg-body);
    text-shadow: 
        0 0 1px var(--color-bg-body),
        0 0 3px var(--color-accent),
        0 0 6px var(--color-accent),
        0 0 12px var(--color-accent-secondary),
        2px 0 0 rgba(255, 0, 85, 0.4),
        -2px 0 0 rgba(0, 217, 247, 0.4);
}

/* Selection on images & media */
img::selection,
video::selection,
svg::selection {
    background-color: var(--color-accent-secondary);
}

img::-moz-selection,
video::-moz-selection,
svg::-moz-selection {
    background-color: var(--color-accent-secondary);
}

/* Selection in code blocks - Terminal/Matrix style */
code::selection,
pre::selection,
.code-block::selection {
    background-color: rgba(0, 255, 0, 0.25);
    color: #00ff00;
    text-shadow: 
        0 0 2px #00ff00,
        0 0 5px #00ff00,
        0 0 10px rgba(0, 255, 0, 0.5);
}

code::-moz-selection,
pre::-moz-selection,
.code-block::-moz-selection {
    background-color: rgba(0, 255, 0, 0.25);
    color: #00ff00;
    text-shadow: 
        0 0 2px #00ff00,
        0 0 5px #00ff00,
        0 0 10px rgba(0, 255, 0, 0.5);
}

/* Selection in links - Alert/Warning style */
a::selection {
    background-color: var(--color-accent-alert);
    color: #fff;
    text-shadow: 
        0 0 2px #fff,
        0 0 4px var(--color-accent-alert),
        0 0 8px var(--color-accent-alert),
        0 0 15px var(--color-accent-alert),
        /* Pulsing danger effect */
        0 0 25px rgba(255, 42, 42, 0.6);
}

a::-moz-selection {
    background-color: var(--color-accent-alert);
    color: #fff;
    text-shadow: 
        0 0 2px #fff,
        0 0 4px var(--color-accent-alert),
        0 0 8px var(--color-accent-alert),
        0 0 15px var(--color-accent-alert),
        0 0 25px rgba(255, 42, 42, 0.6);
}

/* Headings selection - Extra dramatic */
h1::selection, h2::selection, h3::selection,
h4::selection, h5::selection, h6::selection {
    background-color: transparent;
    color: var(--color-accent);
    text-shadow: 
        0 0 5px var(--color-accent),
        0 0 10px var(--color-accent),
        0 0 20px var(--color-accent),
        0 0 40px var(--color-accent-secondary),
        /* Heavy chromatic aberration */
        3px 0 0 rgba(255, 0, 85, 0.7),
        -3px 0 0 rgba(0, 217, 247, 0.7),
        0 3px 0 rgba(255, 183, 0, 0.5);
}

h1::-moz-selection, h2::-moz-selection, h3::-moz-selection,
h4::-moz-selection, h5::-moz-selection, h6::-moz-selection {
    background-color: transparent;
    color: var(--color-accent);
    text-shadow: 
        0 0 5px var(--color-accent),
        0 0 10px var(--color-accent),
        0 0 20px var(--color-accent),
        0 0 40px var(--color-accent-secondary),
        3px 0 0 rgba(255, 0, 85, 0.7),
        -3px 0 0 rgba(0, 217, 247, 0.7),
        0 3px 0 rgba(255, 183, 0, 0.5);
}

/* ==========================================================================
   Dark Mode - MAXIMUM NEON OVERDRIVE
   ========================================================================== */
@media (prefers-color-scheme: dark) {
    /* Main selection - Intense cyan neon */
    ::selection {
        background-color: rgba(0, 255, 234, 0.3);
        color: #fff;
        text-shadow: 
            /* Core white */
            0 0 2px #fff,
            /* Primary neon cyan */
            0 0 5px var(--color-accent),
            0 0 10px var(--color-accent),
            0 0 20px var(--color-accent),
            0 0 35px var(--color-accent),
            /* Secondary magenta bloom */
            0 0 50px var(--color-accent-secondary),
            /* RGB split / Chromatic aberration - Glitch */
            3px 0 0 rgba(255, 0, 85, 0.8),
            -3px 0 0 rgba(0, 255, 234, 0.8),
            0 2px 0 rgba(255, 183, 0, 0.4);
    }
    
    ::-moz-selection {
        background-color: rgba(0, 255, 234, 0.3);
        color: #fff;
        text-shadow: 
            0 0 2px #fff,
            0 0 5px var(--color-accent),
            0 0 10px var(--color-accent),
            0 0 20px var(--color-accent),
            0 0 35px var(--color-accent),
            0 0 50px var(--color-accent-secondary),
            3px 0 0 rgba(255, 0, 85, 0.8),
            -3px 0 0 rgba(0, 255, 234, 0.8),
            0 2px 0 rgba(255, 183, 0, 0.4);
    }
    
    /* Links - Hot pink/magenta neon */
    a::selection {
        background-color: rgba(255, 0, 85, 0.35);
        color: #fff;
        text-shadow: 
            0 0 2px #fff,
            0 0 5px var(--color-accent-secondary),
            0 0 10px var(--color-accent-secondary),
            0 0 20px var(--color-accent-secondary),
            0 0 40px var(--color-accent-secondary),
            /* Inverted chromatic */
            3px 0 0 rgba(0, 255, 234, 0.7),
            -3px 0 0 rgba(255, 183, 0, 0.7);
    }
    
    a::-moz-selection {
        background-color: rgba(255, 0, 85, 0.35);
        color: #fff;
        text-shadow: 
            0 0 2px #fff,
            0 0 5px var(--color-accent-secondary),
            0 0 10px var(--color-accent-secondary),
            0 0 20px var(--color-accent-secondary),
            0 0 40px var(--color-accent-secondary),
            3px 0 0 rgba(0, 255, 234, 0.7),
            -3px 0 0 rgba(255, 183, 0, 0.7);
    }
    
    /* Code - Matrix green overdrive */
    code::selection,
    pre::selection,
    .code-block::selection {
        background-color: rgba(0, 255, 0, 0.15);
        color: #00ff00;
        text-shadow: 
            0 0 2px #00ff00,
            0 0 5px #00ff00,
            0 0 10px #00ff00,
            0 0 20px #00ff00,
            0 0 35px rgba(0, 255, 0, 0.5),
            /* Scanline effect simulation */
            0 1px 0 rgba(0, 0, 0, 0.8);
    }
    
    code::-moz-selection,
    pre::-moz-selection,
    .code-block::-moz-selection {
        background-color: rgba(0, 255, 0, 0.15);
        color: #00ff00;
        text-shadow: 
            0 0 2px #00ff00,
            0 0 5px #00ff00,
            0 0 10px #00ff00,
            0 0 20px #00ff00,
            0 0 35px rgba(0, 255, 0, 0.5),
            0 1px 0 rgba(0, 0, 0, 0.8);
    }
    
    /* Headings - Ultimate neon explosion */
    h1::selection, h2::selection, h3::selection,
    h4::selection, h5::selection, h6::selection {
        background-color: transparent;
        color: #fff;
        text-shadow: 
            /* White hot core */
            0 0 3px #fff,
            0 0 6px #fff,
            /* Primary cyan neon */
            0 0 10px var(--color-accent),
            0 0 20px var(--color-accent),
            0 0 40px var(--color-accent),
            /* Secondary magenta bloom */
            0 0 60px var(--color-accent-secondary),
            0 0 80px var(--color-accent-secondary),
            /* Maximum chromatic aberration */
            4px 0 0 rgba(255, 0, 85, 0.9),
            -4px 0 0 rgba(0, 255, 234, 0.9),
            0 4px 0 rgba(255, 183, 0, 0.6),
            0 -2px 0 rgba(138, 43, 226, 0.5);
    }
    
    h1::-moz-selection, h2::-moz-selection, h3::-moz-selection,
    h4::-moz-selection, h5::-moz-selection, h6::-moz-selection {
        background-color: transparent;
        color: #fff;
        text-shadow: 
            0 0 3px #fff,
            0 0 6px #fff,
            0 0 10px var(--color-accent),
            0 0 20px var(--color-accent),
            0 0 40px var(--color-accent),
            0 0 60px var(--color-accent-secondary),
            0 0 80px var(--color-accent-secondary),
            4px 0 0 rgba(255, 0, 85, 0.9),
            -4px 0 0 rgba(0, 255, 234, 0.9),
            0 4px 0 rgba(255, 183, 0, 0.6),
            0 -2px 0 rgba(138, 43, 226, 0.5);
    }
}

body {
    font-family: var(--font-stack-base);
    background-color: var(--color-bg-body);
    color: var(--color-text-main);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    min-height: 100vh;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
    position: relative;
}

/* Global Noise & Grit Overlay */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--noise-bg);
    pointer-events: none;
    z-index: 9000;
    opacity: 0.4;
    mix-blend-mode: overlay;
}

/* Vignette Effect */
body::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.4) 100%);
    pointer-events: none;
    z-index: 8999;
}

.site-wrapper {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    min-height: 100dvh;
    position: relative;
    z-index: 1; /* Above background effects */
}

.site-main {
    flex: 1;
    width: 100%;
}

a {
    color: inherit;
    text-decoration: none;
    transition: color var(--transition-fast);
}

a:hover {
    color: var(--color-primary);
    text-shadow: none; /* Removed blur effect */
    border-bottom: 1px dashed var(--color-primary); /* Use solid line instead of glow for clarity */
}

img {
    max-width: 100%;
    height: auto;
    display: block;
    /* Grayscale filter by default for wasteland feel, color on hover handled in components */
}

mark {
    background-color: var(--color-mark-bg);
    color: var(--color-mark-text);
    padding: 0.1em 0.2em;
    border: 1px dashed var(--color-mark-text);
}

/* Layout Utilities */
.container {
    width: 100%;
    max-width: var(--container-width);
    margin: var(--spacing-xl) auto 0;
    padding: 0 var(--spacing-md);
}

/* Header & Navigation */
.site-header {
    height: var(--header-height);
    background-color: rgba(255, 255, 255, 0.9);
    border-bottom: 2px solid var(--color-border);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(5px);
    /* Distressed border bottom */
    border-bottom-style: solid;
}

@media (prefers-color-scheme: dark) {
    .site-header {
        background-color: rgba(20, 18, 16, 0.9);
    }
}

.site-header__inner {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.site-logo {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 1.25rem;
    color: var(--color-text-main);
}

.site-logo__img {
    height: 32px;
    width: 32px;
    border: 1px solid var(--color-accent);
    /* Hexagon clip for logo */
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}

/* Footer */
.site-footer {
    padding: var(--spacing-xl) 0;
    margin-top: var(--spacing-xl);
    background-color: var(--color-bg-surface);
    border-top: 4px solid var(--color-border);
    text-align: center;
    color: var(--color-text-secondary);
    font-size: 0.875rem;
    background-image: var(--hazard-stripes);
    background-size: 20px 20px;
    background-repeat: repeat-x;
    background-position: top;
    padding-top: 3rem; /* Make room for stripes */
}

/* Utility Classes */
.text-center { text-align: center; }
.mt-1 { margin-top: var(--spacing-md); }
.mt-2 { margin-top: var(--spacing-lg); }

/* SignalR Connection Status */
.connection-status {
    display: inline-block;
    width: 0.6rem;
    height: 0.6rem;
    /* Square instead of circle */
    background-color: var(--color-status-disconnected);
    vertical-align: middle;
    margin-left: var(--spacing-sm);
    transition: background-color var(--transition-normal), box-shadow var(--transition-normal);
    cursor: help;
    border: 1px solid rgba(0,0,0,0.5);
}

.connection-status--connected {
    background-color: var(--color-status-connected);
    box-shadow: 0 0 5px var(--color-status-connected);
}

.connection-status--disconnected {
    background-color: var(--color-status-error);
    animation: status-pulse 1s infinite steps(2); /* Digital blink */
}

@keyframes status-pulse {
    0% { opacity: 1; }
    50% { opacity: 0.2; }
    100% { opacity: 1; }
}
