@page "/timeline"
<PageTitle>时间轴 - 个人文章分享</PageTitle>

<div class="timeline-page">
    <div class="timeline-page__header">
        <h1 class="timeline-page__title" data-text="时光轴">时光轴</h1>
        <p class="timeline-page__subtitle" data-text="记录点滴，见证成长">记录点滴，见证成长</p>
    </div>
    
    <div class="timeline">
        @if (_isLoading)
        {
            @for (int i = 0; i < 4; i++)
            {
                <div class="timeline__item is-visible">
                    <div class="timeline__marker"></div>
                    <div class="timeline__content">
                        <div class="skeleton skeleton--text skeleton--w-25" style="margin-bottom: 1rem;"></div>
                        <div class="skeleton skeleton--title skeleton--w-60"></div>
                        <div class="skeleton skeleton--text skeleton--w-100"></div>
                        <div class="skeleton skeleton--text skeleton--w-90"></div>
                        <div class="skeleton skeleton--text skeleton--w-80"></div>
                    </div>
                </div>
            }
        }
        else
        {
            var index = 0;
            @foreach (var item in _source)
            {
                var currentIndex = index;
                <div class="timeline__item @(item.IsVisible ? "is-visible" : "")" data-index="@currentIndex">
                    <div class="timeline__marker"></div>
                    <div class="timeline__content">
                        <div class="timeline__date">@item.Model.Date.ToString("yyyy-MM-dd")</div>
                        <h2 class="timeline__title" data-text="@item.Model.Title">@item.Model.Title</h2>
                        @if (!string.IsNullOrEmpty(item.Model.Content))
                        {
                            <MarkdownPreview Markdown="@item.Model.Content" Class="timeline__body markdown-body" />
                        }
                        @if (!string.IsNullOrEmpty(item.Model.More))
                        {
                            <a href="@item.Model.More" target="_blank" class="timeline__more">阅读更多</a>
                        }
                    </div>
                </div>
                index++;
            }
        }
    </div>
</div>
